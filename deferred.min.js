!function(){var n,r,e,t,u,a,l,i,o,s,c,f,p,g=[].slice;u="2.1.0",r="pending",t="resolved",e="rejected",o=function(n,r){return null!=n?n.hasOwnProperty(r):void 0},c=function(n){return o(n,"length")&&o(n,"callee")},i=function(n){return c(n)?i(Array.prototype.slice.call(n)):Array.isArray(n)?n.reduce(function(n,r){return Array.isArray(r)?n.concat(i(r)):(n.push(r),n)},[]):[n]},a=function(n,r){return 0>=n?r():function(){return--n<1?r.apply(this,arguments):void 0}},f=function(n,r){return function(){var e;return e=[n].concat(Array.prototype.slice.call(arguments,0)),r.apply(this,e)}},l=function(n,r,e){var t,u,a,l,o;for(l=i(n),o=[],u=0,a=l.length;a>u;u++)t=l[u],o.push(t.call.apply(t,[e].concat(g.call(r))));return o},n=function(){var u,a,s,c,f;return this.isPromise=function(){return!0},f=r,s=[],c=[],a={},this.promise=function(u){var p,h;return u=u||{},u.state=function(){return f},h=function(n,e){return function(){return f===r&&e.push.apply(e,i(arguments)),n()&&l(arguments,a),u}},u.done=h(function(){return f===t},s),u.fail=h(function(){return f===e},c),u.always=function(){var n;return(n=u.done.apply(u,arguments)).fail.apply(n,arguments)},p=function(r,e){var t,a;return t=new n,a=function(n,r,e){return e?u[n](function(){var t,u;return t=1<=arguments.length?g.call(arguments,0):[],u=e.apply(null,t),o(u,"isPromise")&&u.isPromise()?u[n](function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],r.apply(null,n)}):r(u)}):u[n](function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],r.apply(null,n)})},a("done",t.resolve,r),a("fail",t.reject,e),t},u.pipe=p,u.then=p,u},this.promise(this),u=function(n,e,t){return function(){return f===r&&(f=n,a=arguments,l(e,a,t)),this}},this.resolve=u(t,s),this.reject=u(e,c),this.resolveWith=function(){var n,r;return r=arguments[0],n=2<=arguments.length?g.call(arguments,1):[],u(t,s,r).apply(null,n)},this.rejectWith=function(){var n,r;return r=arguments[0],n=2<=arguments.length?g.call(arguments,1):[],u(e,c,r).apply(null,n)},this},p=function(){var r,e,t,u,l,o,s;for(l=new n,e=i(arguments),1===e.length?e[0].done(function(){return l.resolve.apply(l,arguments)}):(u=[],t=a(e.length,function(){return l.resolve.apply(l,u)}),e.forEach(function(n,r){return n.done(function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],u[r]=n,t()})})),o=0,s=e.length;s>o;o++)r=e[o],r.fail(l.reject);return l.promise()},s=function(r){return r.Deferred=function(){return new n},r.ajax=f(r.ajax,function(r,e){var t,u,a,l;return null==e&&(e={}),u=new n,t=function(n,r){return f(n,function(){var n,e;return e=arguments[0],n=2<=arguments.length?g.call(arguments,1):[],e&&e.apply(null,n),r.apply(null,n)})},e.success=t(e.success,u.resolve),e.error=t(e.error,u.reject),l=r(e),a=u.promise(),a.abort=function(){return l.abort()},a}),r.when=p},"undefined"!=typeof exports?(exports.Deferred=function(){return new n},exports.when=p,exports.installInto=s):(this.Deferred=function(){return new n},this.Deferred.when=p,this.Deferred.installInto=s)}.call(this);